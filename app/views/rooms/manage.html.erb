<div class="flex flex-col w-full gap-5 mx-auto mb-10 text-gray-700 sm:w-11/12 md:w-10/12 xxl:w-9/12 lg:max-w-1366">
  <!-- room_edit -->
  <h1 class="h1">管理房源</h1>
  <div class="relative mb-2 overflow-x-auto">
    <table class="w-full text-sm text-left text-gray-500 table-fixed">
      <thead class="text-sm text-gray-700 uppercase bg-gray-50">
        <tr>
          <th scope="col" class="w-4/12 px-2 py-5">
            地址
          </th>
          <th scope="col" class="w-4/12 px-2">
            介紹
          </th>
          <th scope="col" class="w-2/12 px-2">
            價格
          </th>
          <th scope="col" class="w-2/12 px-2">
            選項
          </th>
        </tr>
      </thead>
      <tbody>
        <% @rooms.reverse.each do |room| %>
          <tr class="bg-white border-b ">
            <th scope="row" class="py-5 font-medium text-gray-700 ">
              <div class="flex flex-col flex-wrap gap-1 px-2">
                <%= link_to room.address, room_path(room), class:"block" %>
                <%= Room.human_enum_name(:home_type, room.home_type) %>
              </div>
            </th>
            <td class="px-2">
              <%= room.summary %>
            </td>
            <td class="px-2">
              <%= to_twd(room.price)%>
            </td>
            <td>
              <div class="flex flex-col items-start gap-2 px-2 sm:items-center sm:flex-row ">
                <button  class="flex-shrink-0 px-3 py-2 text-white rounded btn w-fit"><%= link_to "編輯", edit_room_path(room) %></button>
                <a href="<%= room_path(room)%>" data-method="DELETE" data-confirm="確定要刪除嗎？">
                  <i class="flex-shrink-0 p-2 fa-regular fa-trash-can btn-delete"></i>
                </a>
              </div>
            </td>
          </tr>
        <%end%>
      </tbody>
    </table>
  </div>
  <!-- 即將到來的住宿 -->
  <h2 class="h2">即將到來的住宿</h2>
  <div class="relative overflow-x-auto">
    <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
      <thead class="text-sm text-gray-700 uppercase bg-gray-50">
        <tr>
          <th scope="col" class="px-6 py-3">
            地址
          </th>
          <th scope="col" class="px-6 py-3">
            日期
          </th>
          <th scope="col" class="px-6 py-3">
            入住者
          </th>
          <th scope="col" class="px-6 py-3">
            價格
          </th>
          <th scope="col" class="px-6 py-3">
            選項
          </th>
        </tr>
      </thead>
      <tbody>
        <%current_user.bookings.where(state: 3).each do |booking|%>
          <div class="flex gap-1 font-bold h3">
            <%=booking.start_at%>
            <%=booking.end_at%>
          </div>
        <% end %>
      </tbody>
    </table>
  </div>
  <!-- 未來收入 -->
  <div>
    <h2 class="font-bold h2">本月預定收入
      <%= to_twd(@monthly_past_income + @monthly_paid_income)%>
    </h2>
    <div class="text-xl">
      <h3 class="h3">可提領收入：<%= to_twd(@monthly_past_income) %></h3>
      <h3 class="h3">預期收入：<%=  to_twd(@monthly_paid_income) %></h3>
      <div class="mb-8">
        <%# dashboard will be here %>
        <%= line_chart @monthly_income_data, 
    xmin: Date.today.beginning_of_month, xmax: Date.today.end_of_month, curve: false,
    ytitle: '收入', loading: 'Loading...', empty: 'No data', prefix: '$' %>
      </div>
    </div>
